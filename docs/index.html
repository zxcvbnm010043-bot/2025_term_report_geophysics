<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>地球物理與資料處理實務 - 課程主頁</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .card-hover:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .transition-all { transition: all 0.3s ease; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 font-sans">

    <!-- Navbar -->
    <nav class="bg-blue-900 text-white p-4 sticky top-0 z-50 shadow-lg">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-xl font-bold"><i class="fa-solid fa-earth-americas mr-2"></i>地球物理與資料處理實務</h1>
            <div class="text-sm">113學年度第一學期</div>
        </div>
    </nav>

    <!-- Header -->
    <header class="bg-white shadow-sm py-8">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-slate-800 mb-2">課程大綱與進度</h2>
            <p class="text-slate-600">本課程結合地球物理理論與現代 Python 資料處理技術。</p>
        </div>
    </header>

    <!-- Controls -->
    <section class="container mx-auto px-4 py-6 sticky top-16 bg-slate-50 z-40">
        <div class="flex flex-wrap gap-2 justify-center">
            <button onclick="filterCourses('all')" class="filter-btn active bg-slate-800 text-white px-5 py-2 rounded-full hover:bg-slate-700 transition-all shadow-md" id="btn-all">全部顯示</button>
            <button onclick="filterCourses('geo')" class="filter-btn bg-white text-blue-600 border border-blue-600 px-5 py-2 rounded-full hover:bg-blue-50 transition-all" id="btn-geo">地球物理知識</button>
            <button onclick="filterCourses('data')" class="filter-btn bg-white text-green-600 border border-green-600 px-5 py-2 rounded-full hover:bg-green-50 transition-all" id="btn-data">資料處理技能</button>
        </div>
    </section>

    <!-- Course Grid -->
    <main class="container mx-auto px-4 pb-20">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="course-grid">
            <!-- JavaScript 將自動生成內容 -->
        </div>
    </main>

    <footer class="bg-slate-800 text-slate-400 py-8 text-center">
        <p>&copy; 2024 地球物理學系 Course Webpage.</p>
    </footer>

    <script>
        // 注意：這裡的 link 必須與您的檔案名稱完全一致 (大小寫敏感)
        const schedule = [
            { week: 1, date: "9/10", title: "課程介紹", geo: "地球物理概要", data: "Python環境, Google/HF/Github帳號, Colab, Codespace, Dify", special: false },
            { week: 2, date: "9/17", title: "折射與工具", geo: "折射探勘學", data: "PyGMT, ObsPy, Streamlit, Gradio", special: false },
            // 第三週連結設定
            { week: 3, date: "9/24", title: "校園野外實驗", geo: "折射探勘實作", data: null, special: true, link: "week3_field.html" },
            { week: 4, date: "10/1", title: "專題演講", geo: "地球物理專題演講", data: null, special: "guest" },
            { week: 5, date: "10/8", title: "折射與互動程式", geo: "折射探勘學", data: "Hugging Face Space 製作互動程式", special: false },
            { week: 6, date: "10/15", title: "重力與雲端運算", geo: "重力探勘學", data: "Colab 使用", special: false },
            { week: 7, date: "10/22", title: "重力與版控", geo: "重力探勘學", data: "Github 與 Codespace 使用", special: false },
            { week: 8, date: "10/29", title: "期中考", geo: null, data: null, special: "exam" },
            { week: 9, date: "11/05", title: "板塊與繪圖 I", geo: "板塊構造與地震", data: "PyGMT", special: false },
            { week: 10, date: "11/12", title: "板塊與繪圖 II", geo: "板塊構造與地震", data: "PyGMT", special: false },
            { week: 11, date: "11/19", title: "地磁與地震波 I", geo: "板塊構造與地磁", data: "ObsPy", special: false },
            { week: 12, date: "11/26", title: "地磁與地震波 II", geo: "板塊構造與地磁", data: "ObsPy", special: false },
            { week: 13, date: "12/3", title: "地熱與 AI API", geo: "板塊構造與地熱", data: "Gemini API 申請, Dify", special: false },
            { week: 14, date: "12/10", title: "地熱與 AI 應用", geo: "板塊構造與地熱", data: "Dify", special: false },
            { week: 15, date: "12/17", title: "期末專題發表", geo: null, data: null, special: "exam" },
            { week: 16, date: "12/24", title: "行憲紀念日", geo: null, data: null, special: "holiday" },
            { week: 17, date: "12/31", title: "彈性學習週", geo: null, data: null, special: "holiday" },
            { week: 18, date: "1/7", title: "校外參訪", geo: "參訪大屯火山觀測中心 (暫定)", data: null, special: "trip" },
        ];

        const grid = document.getElementById('course-grid');

        function renderCourses(type) {
            grid.innerHTML = '';
            schedule.forEach(item => {
                let show = true;
                
                let cardClass = "bg-white border-l-4 border-slate-300";
                let icon = "fa-calendar-day";
                
                if(item.special === true) { cardClass = "bg-amber-50 border-l-4 border-amber-500"; icon = "fa-person-digging"; } 
                else if(item.special === 'exam') { cardClass = "bg-red-50 border-l-4 border-red-500"; icon = "fa-pen-to-square"; }
                else if(item.special === 'holiday') { cardClass = "bg-gray-100 border-l-4 border-gray-400 opacity-60"; icon = "fa-mug-hot"; }
                else if(item.special === 'guest') { cardClass = "bg-purple-50 border-l-4 border-purple-500"; icon = "fa-microphone"; }
                else if(item.special === 'trip') { cardClass = "bg-green-50 border-l-4 border-green-500"; icon = "fa-bus"; }

                let geoContent = item.geo ? `<div class="mb-2"><span class="text-xs font-bold text-blue-600 bg-blue-100 px-2 py-1 rounded">地球物理</span> <p class="mt-1 text-sm text-slate-700">${item.geo}</p></div>` : '';
                let dataContent = item.data ? `<div class="mb-2"><span class="text-xs font-bold text-green-600 bg-green-100 px-2 py-1 rounded">資料處理</span> <p class="mt-1 text-sm text-slate-700">${item.data}</p></div>` : '';

                if (type === 'geo' && !item.geo) show = false;
                if (type === 'data' && !item.data) show = false;
                if (type === 'geo') dataContent = ''; 
                if (type === 'data') geoContent = '';

                let linkButton = '';
                if(item.link) {
                    // 這裡產生連結按鈕
                    linkButton = `<a href="${item.link}" class="block mt-4 text-center bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded shadow-md hover:shadow-lg transition-all transform active:scale-95"><i class="fa-solid fa-arrow-up-right-from-square mr-1"></i> 進入野外實驗頁面</a>`;
                }

                if (show) {
                    const card = document.createElement('div');
                    card.className = `${cardClass} p-5 rounded-lg shadow-sm card-hover relative transition-all flex flex-col justify-between`;
                    card.innerHTML = `
                        <div>
                            <div class="flex justify-between items-start mb-3">
                                <div>
                                    <h3 class="font-bold text-lg text-slate-800">第 ${item.week} 週</h3>
                                    <span class="text-sm text-slate-500 font-mono">${item.date}</span>
                                </div>
                                <div class="text-2xl text-slate-300">
                                    <i class="fa-solid ${icon}"></i>
                                </div>
                            </div>
                            <h4 class="text-md font-semibold text-slate-900 mb-3 border-b pb-2">${item.title}</h4>
                            <div class="space-y-3">
                                ${geoContent}
                                ${dataContent}
                            </div>
                        </div>
                        ${linkButton}
                    `;
                    grid.appendChild(card);
                }
            });
        }

        function filterCourses(type) {
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('bg-slate-800', 'text-white');
                btn.classList.add('bg-white', 'text-slate-600');
            });
            const activeBtn = document.getElementById(`btn-${type}`);
            activeBtn.classList.remove('bg-white', 'text-slate-600');
            activeBtn.classList.add('bg-slate-800', 'text-white');
            renderCourses(type);
        }

        renderCourses('all');
    </script>
</body>
</html>
