<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>地球物理與資料處理實務 - 課程主頁</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .card-hover:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .transition-all { transition: all 0.3s ease; }

        /* 進場動畫 */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-card {
            opacity: 0;
            animation: fadeInUp 0.5s ease-out forwards;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 font-sans">

    <!-- Navbar -->
    <nav class="bg-blue-900 text-white p-4 sticky top-0 z-50 shadow-lg">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-xl font-bold"><i class="fa-solid fa-earth-americas mr-2"></i>地球物理與資料處理實務</h1>
            <div class="text-sm">113學年度第一學期</div>
        </div>
    </nav>

    <!-- Header -->
    <header class="bg-white shadow-sm py-8">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-slate-800 mb-2">課程大綱與進度</h2>
            <p class="text-slate-600">本課程結合地球物理理論與現代 Python 資料處理技術。</p>
        </div>
    </header>

    <!-- Controls -->
    <section class="container mx-auto px-4 py-6 sticky top-16 bg-slate-50 z-40">
        <div class="flex flex-wrap gap-2 justify-center">
            <button onclick="filterCourses('all')" class="filter-btn active bg-slate-800 text-white px-5 py-2 rounded-full hover:bg-slate-700 transition-all shadow-md" id="btn-all">全部顯示</button>
            <button onclick="filterCourses('geo')" class="filter-btn bg-white text-blue-600 border border-blue-600 px-5 py-2 rounded-full hover:bg-blue-50 transition-all" id="btn-geo">地球物理知識</button>
            <button onclick="filterCourses('data')" class="filter-btn bg-white text-green-600 border border-green-600 px-5 py-2 rounded-full hover:bg-green-50 transition-all" id="btn-data">資料處理技能</button>
        </div>
    </section>

    <!-- Course Grid -->
    <main class="container mx-auto px-4 pb-20">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="course-grid">
            <!-- JavaScript 將自動生成內容 -->
        </div>
    </main>

    <footer class="bg-slate-800 text-slate-400 py-8 text-center">
        <p>&copy; 2024 地球物理學系 Course Webpage.</p>
    </footer>

    <script>
        // --- 課程資料設定 ---
        const schedule = [
            { 
                week: 1, 
                date: "9/10", 
                title: "課程介紹", 
                geo: "地球物理概要", 
                data: "Python環境, Google/HF/Github帳號, Colab, Codespace, Dify", 
                special: false,
                // 修改處：這裡改用 links 陣列，可以放多個按鈕
                links: [
                    {
                        text: "進入課程互動頁面",
                        url: "https://huggingface.co/spaces/Lee010043/Geophysics-w1",
                        color: "bg-indigo-600 hover:bg-indigo-700",
                        icon: "fa-robot"
                    },
                    {
                        text: "地球物理課程網頁",
                        url: "https://zxcvbnm010043.blogspot.com/2025/09/blog-post.html",
                        color: "bg-emerald-600 hover:bg-emerald-700",
                        icon: "fa-book-open"
                    }
                ]
            },
            { week: 2, date: "9/17", title: "折射與工具", geo: "折射探勘學", data: "PyGMT, ObsPy, Streamlit, Gradio", special: false },
            { 
                week: 3, 
                date: "9/24", 
                title: "校園野外實驗", 
                geo: "折射探勘實作", 
                data: null, 
                special: true, 
                // 單一連結仍可支援，或寫成 array 也可以
                links: [
                    {
                        text: "進入野外實驗頁面",
                        url: "week3_field.html",
                        color: "bg-amber-500 hover:bg-amber-600",
                        icon: "fa-person-digging"
                    }
                ]
            },
            { week: 4, date: "10/1", title: "甘禮有博士-專題演講", geo: "地球物理專題演講", data: null, special: "guest" },
            { week: 5, date: "10/8", title: "折射與互動程式", geo: "折射探勘學", data: "Hugging Face Space 製作互動程式", special: false },
            { week: 6, date: "10/15", title: "重力與雲端運算", geo: "重力探勘學", data: "Colab 使用", special: false },
            { week: 7, date: "10/22", title: "重力與版控", geo: "重力探勘學", data: "Github 與 Codespace 使用", special: false },
            { week: 8, date: "10/29", title: "期中考", geo: null, data: null, special: "exam" },
            { week: 9, date: "11/05", title: "板塊與繪圖 I", geo: "板塊構造與地震", data: "PyGMT", special: false },
            { week: 10, date: "11/12", title: "板塊與繪圖 II", geo: "板塊構造與地震", data: "PyGMT", special: false },
            { week: 11, date: "11/19", title: "地磁與地震波 I", geo: "板塊構造與地磁", data: "ObsPy", special: false },
            { week: 12, date: "11/26", title: "地熱與 AI API", geo: "板塊構造與地熱", data: "Gemini API 申請, Dify", special: false  },
            { week: 13, date: "12/3", title: "地熱與 AI 應用", geo: "板塊構造與地熱", data: "Dify", special: false  },
            { week: 14, date: "12/10", title: "黃有志博士-專題演講", geo: "地球物理專題演講", data: null, special: "guest"  },
            { week: 15, date: "12/17", title: "廖勿渝博士-專題演講", geo: "地球物理專題演講", data: null, special: "guest" },
            { week: 16, date: "12/24", title: "期末專題發表", geo: null, data: null, special: "exam" },
            { week: 17, date: "12/31", title: "彈性學習週", geo: null, data: null, special: "holiday" },
            { week: 18, date: "1/7", title: "校外參訪", geo: "參訪大屯火山觀測中心 (暫定)", data: null, special: "trip" },
        ];

        const grid = document.getElementById('course-grid');

        function renderCourses(type) {
            grid.innerHTML = '';
            let visibleCount = 0;

            schedule.forEach(item => {
                let show = true;
                
                let cardClass = "bg-white border-l-4 border-slate-300";
                let icon = "fa-calendar-day";
                
                if(item.special === true) { cardClass = "bg-amber-50 border-l-4 border-amber-500"; icon = "fa-person-digging"; } 
                else if(item.special === 'exam') { cardClass = "bg-red-50 border-l-4 border-red-500"; icon = "fa-pen-to-square"; }
                else if(item.special === 'holiday') { cardClass = "bg-gray-100 border-l-4 border-gray-400 opacity-60"; icon = "fa-mug-hot"; }
                else if(item.special === 'guest') { cardClass = "bg-purple-50 border-l-4 border-purple-500"; icon = "fa-microphone"; }
                else if(item.special === 'trip') { cardClass = "bg-green-50 border-l-4 border-green-500"; icon = "fa-bus"; }

                let geoContent = item.geo ? `<div class="mb-2"><span class="text-xs font-bold text-blue-600 bg-blue-100 px-2 py-1 rounded">地球物理</span> <p class="mt-1 text-sm text-slate-700">${item.geo}</p></div>` : '';
                let dataContent = item.data ? `<div class="mb-2"><span class="text-xs font-bold text-green-600 bg-green-100 px-2 py-1 rounded">資料處理</span> <p class="mt-1 text-sm text-slate-700">${item.data}</p></div>` : '';

                if (type === 'geo' && !item.geo) show = false;
                if (type === 'data' && !item.data) show = false;
                if (type === 'geo') dataContent = ''; 
                if (type === 'data') geoContent = '';

                // --- 產生連結按鈕 (支援多個) ---
                let buttonsHtml = '';
                
                // 優先檢查是否有 links 陣列
                if (item.links && item.links.length > 0) {
                    buttonsHtml = '<div class="mt-4 flex flex-col gap-2">';
                    item.links.forEach(link => {
                        buttonsHtml += `
                            <a href="${link.url}" target="_blank" class="block text-center ${link.color} text-white font-bold py-2 px-4 rounded shadow-md hover:shadow-lg transition-all transform active:scale-95 text-sm">
                                <i class="fa-solid ${link.icon || 'fa-arrow-up-right-from-square'} mr-1"></i> ${link.text}
                            </a>`;
                    });
                    buttonsHtml += '</div>';
                } 
                // 向下相容：如果只有舊的 link 屬性
                else if (item.link) {
                    const btnText = item.linkText || "查看詳情";
                    let btnColor = "bg-slate-700 hover:bg-slate-800";
                    if(item.special === true) btnColor = "bg-amber-500 hover:bg-amber-600";
                    
                    buttonsHtml = `
                        <a href="${item.link}" target="_blank" class="block mt-4 text-center ${btnColor} text-white font-bold py-2 px-4 rounded shadow-md hover:shadow-lg transition-all transform active:scale-95">
                            <i class="fa-solid fa-arrow-up-right-from-square mr-1"></i> ${btnText}
                        </a>`;
                }

                if (show) {
                    const card = document.createElement('div');
                    card.className = `${cardClass} p-5 rounded-lg shadow-sm card-hover relative transition-all flex flex-col justify-between animate-card`;
                    card.style.animationDelay = `${visibleCount * 0.05}s`;

                    card.innerHTML = `
                        <div>
                            <div class="flex justify-between items-start mb-3">
                                <div>
                                    <h3 class="font-bold text-lg text-slate-800">第 ${item.week} 週</h3>
                                    <span class="text-sm text-slate-500 font-mono">${item.date}</span>
                                </div>
                                <div class="text-2xl text-slate-300">
                                    <i class="fa-solid ${icon}"></i>
                                </div>
                            </div>
                            <h4 class="text-md font-semibold text-slate-900 mb-3 border-b pb-2">${item.title}</h4>
                            <div class="space-y-3">
                                ${geoContent}
                                ${dataContent}
                            </div>
                        </div>
                        ${buttonsHtml}
                    `;
                    grid.appendChild(card);
                    visibleCount++;
                }
            });
        }

        function filterCourses(type) {
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('bg-slate-800', 'text-white');
                btn.classList.add('bg-white', 'text-slate-600');
            });
            const activeBtn = document.getElementById(`btn-${type}`);
            activeBtn.classList.remove('bg-white', 'text-slate-600');
            activeBtn.classList.add('bg-slate-800', 'text-white');
            renderCourses(type);
        }

        renderCourses('all');
    </script>
</body>
</html>
